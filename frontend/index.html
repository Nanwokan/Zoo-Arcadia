<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accueil - Zoo Arcadia</title>
    <link rel="stylesheet" href="CSS/css ash.css">
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;700&family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
</head>
<body>
    <!-- Header visiteur -->
    <header>
        <div class="logo">
            <img src="img/logo/logo sans fond.png" alt="Logo du zoo Arcadia">
        </div>
        <nav class="nav-visiteur">
            <ul>
                <li><a href="index.html">Accueil</a></li>
                <li><a href="pages/services.html">Services</a></li>
                <li><a href="pages/habitats.html">Habitats</a></li>
                <li><a href="pages/animaux.html">Animaux</a></li>
                <li><a href="pages/contact.html">Contact</a></li>
            </ul>
        </nav>
        <div class="connexion">
            <a href="pages/connexion.html">
                <i class="bx bx-user-circle"></i>
            </a>
        </div>
        <div class="menu-toggle">
            <i class="bx bx-menu"></i>
        </div>
    </header>

    <!-- Panneau coulissant du menu -->
    <div id="menu-panel" class="menu-panel">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <div class="menu-panel-content">
            <a href="index.html">Accueil</a>
            <a href="pages/services.html">Services</a>
            <a href="pages/habitats.html">Habitats</a>
            <a href="pages/animaux.html">Animaux</a>
            <a href="pages/contact.html">Contact</a>
            <a href="pages/connexion.html">
                <i class="bx bx-user-circle"></i>
            </a>
        </div>
    </div>

    <!-- Contenu de la page d'accueil -->
    <section class="main">
        <video autoplay muted loop id="background-video">
            <source src="img/slidepresentation/Design sans titre.mp4" type="video/mp4">
        </video>
    </section>
    <main>
        <!-- Section des habitats -->
        <section class="hab-present section1">
            <h2>Nos Habitats</h2>
            <div class="present-list hab-present-list" id="habitatList">
               
            </div>
        </section>

        <!-- Section des Services -->
        <section class="serv-present section2">
            <h2>Nos Services</h2>
            <div class="present-list serv-present-list" id="serviceList">
                 <!-- Les cartes seront générées dynamiquement ici --> 
            </div>
        </section>
        <section class="avis">
            <div id="reviewsContainer">
                <h2>Commentaires</h2>
                <!-- Les avis validés seront affichés ici -->
            </div>
            <div class="review-form">
                <form id="reviewForm">
                    <h2>Laissez un avis</h2>
                    <div class="star-rating form-group">
                        <span class="star" data-value="1">&#9733;</span>
                        <span class="star" data-value="2">&#9733;</span>
                        <span class="star" data-value="3">&#9733;</span>
                        <span class="star" data-value="4">&#9733;</span>
                        <span class="star" data-value="5">&#9733;</span>
                    </div>
                    <div class="form-group">
                        <label for="pseudo">Pseudo</label>
                        <input type="text" class="form-control" id="pseudo" name="pseudo" required>
                    </div>
                    <div class="form-group">
                        <label for="comment">Commentaire</label>
                        <textarea class="form-control" id="comment" name="commentaire" rows="3" required></textarea>
                    </div>
                    <input type="hidden" id="rating-value" name="rating" value="0">
                    <button type="submit" class="btn btn-success">Envoyer</button>
                </form>
            </div>
        </section>
    </main>
    <!-- Footer -->
    <footer>
        <div>
            <div>
                <h4>Arcadia Zoo <br>123 Avenue des Animaux <br>75000 Ville de Zoo</h4>
                <h4>Contacts:</h4>
                <ul>
                    <li><a href="tel:+33123456789">+33 1 23 45 67 89</a> ou</li>
                    <li><a href="mailto:info@arcadiazoo.com">info@arcadiazoo.com</a></li>
                </ul>
            </div>
            <div>
                <ul>
                    <li><a href="politique_confidentialite.html">Politiques de confidentialité</a></li>
                    <li><a href="mentions_legales.html">Mentions légales</a></li>
                    <li><a href="conditions_utilisation.html">Conditions d'utilisation</a></li>
                    <li><a href="plan_site.html">Plan du site</a></li>
                    <li><a href="faq.html">FAQ</a></li>
                </ul>
            </div>
            <div>
                <h4>Réseaux Sociaux :</h4>
                <ul>
                    <li><a href="https://www.facebook.com/votrepage">Facebook</a></li>
                    <li><a href="https://www.twitter.com/votrecompte">Twitter</a></li>
                    <li><a href="https://www.instagram.com/votrecompte">Instagram</a></li>
                </ul>
                <h4>Langue :
                    <select id="langSelector">
                        <option value="fr">Français</option>
                        <option value="en">English</option>
                    </select>
                </h4>
                <h4>Crédits :</h4>
                <ul>
                    <li>Conçu et développé par DevOkan</li>
                </ul>
            </div>
        </div>
        <p>&copy; 2024 Zoo Arcadia. Tous droits réservés.</p>
    </footer>
    <!-- Scripts -->
    <script src="js/document.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const serviceList = document.getElementById('serviceList');

            fetch('http://localhost:2004/api/services')
                .then(response => response.json())
                .then(data => {
                    data.forEach(service => {
                        const serviceCard = document.createElement('div');
                        serviceCard.className = 'list-card';
                        serviceCard.innerHTML = `
                            <div class="card-body">
                                <h3 class="card-title">${service.nom}</h3>
                                <p class="card-text">${service.description}</p>
                            </div>
                        `;
                        serviceList.appendChild(serviceCard);
                    });
                })
                .catch(error => console.error('Erreur:', error));
        });

        document.addEventListener('DOMContentLoaded', function () {
            const habitatList = document.getElementById('habitatList');

            fetch('http://localhost:2004/api/habitats')
                .then(response => response.json())
                .then(data => {
                    data.forEach(habitat => {
                        const habitatCard = document.createElement('div');
                        habitatCard.className = 'list-card';
                        habitatCard.innerHTML = `
                            <div class="card-body">
                                <h3 class="card-title">${habitat.nom}</h3>
                                <p class="card-text">${habitat.description}</p>
                            </div>
                        `;
                        habitatList.appendChild(habitatCard);
                    });
                })
                .catch(error => console.error('Erreur:', error));
        });
    </script>
    <script>
        document.getElementById('reviewForm').addEventListener('submit', function(event) {
            event.preventDefault();
    
            const pseudo = document.getElementById('pseudo').value;
            const commentaire = document.getElementById('comment').value;
            const rating = document.getElementById('rating-value').value;
    
            fetch('http://localhost:2004/api/avis', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ pseudo, commentaire, rating })
            })
            .then(response => response.json())
            .then(data => {
                alert('Votre avis a été soumis pour validation.');
                document.getElementById('reviewForm').reset();
                document.getElementById('rating-value').value = '0';
                displayApprovedReviews();
            })
            .catch(error => console.error('Erreur:', error));
        });
    
        document.addEventListener('DOMContentLoaded', () => {
            const stars = document.querySelectorAll('.star');
            const ratingValue = document.getElementById('rating-value');
            let selectedRating = 0;
    
            function highlightStars(rating) {
                stars.forEach(star => {
                    star.classList.remove('selected');
                    if (star.getAttribute('data-value') <= rating) {
                        star.classList.add('selected');
                    }
                });
            }
    
            stars.forEach(star => {
                star.addEventListener('click', () => {
                    selectedRating = star.getAttribute('data-value');
                    ratingValue.value = selectedRating;
                    highlightStars(selectedRating);
                });
    
                star.addEventListener('mouseover', () => {
                    highlightStars(star.getAttribute('data-value'));
                });
    
                star.addEventListener('mouseout', () => {
                    highlightStars(selectedRating);
                });
            });
    
            displayApprovedReviews();
        });
    
        function displayApprovedReviews() {
            fetch('http://localhost:2004/api/avis')
            .then(response => response.json())
            .then(avis => {
                const reviewsContainer = document.getElementById('reviewsContainer');
                reviewsContainer.innerHTML = '<h2>Ce Que Nos Visiteurs Disent...</h2>';
    
                avis.forEach(review => {
                    if (review.isVisible) {
                        const reviewCard = document.createElement('div');
                        reviewCard.classList.add('card', 'review-card');
                        reviewCard.innerHTML = `
                            <div class="card-body">
                                <h3 class="card-title">${review.pseudo}</h3>
                                <div class="star-rating">${'&#9733;'.repeat(review.rating)}</div>
                                <p class="card-text">${review.commentaire}</p>
                            </div>
                        `;
                        reviewsContainer.appendChild(reviewCard);
                    }
                });
            })
            .catch(error => console.error('Erreur:', error));
        }
    </script>
</body>
</html>
